@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["StudentOfficeTitle"];
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <!-- Ліва панель -->
        <nav class="col-2 bg-light border-end"
             style="position:fixed; top:0; left:0; height:100vh; overflow-y:auto; padding:20px;">
            <h5>@Localizer["Menu"]</h5>
            <ul class="nav flex-column nav-pills">
                <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#schedule">📅 @Localizer["Schedule"]</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#materials">📂 @Localizer["Materials"]</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#progress">📊 @Localizer["Progress"]</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#payments">💳 @Localizer["Payments"]</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#chat">💬 @Localizer["Chat"]</a></li>
            </ul>
            <hr />
            <footer class="small text-center">
                <p>📞 @Localizer["ContactInfo"]</p>
                <p>🌐 <a href="#">@Localizer["Facebook"]</a> | <a href="#">@Localizer["Instagram"]</a> | <a href="#">@Localizer["LinkedIn"]</a></p>
            </footer>
        </nav>

        <!-- Центральна частина -->
        <main class="col-10 offset-2 p-4">
            <h2 class="mb-4">🎓 @Localizer["MyOffice"]</h2>

            <!-- Вкладки -->
            <ul class="nav nav-tabs" id="studentTabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" id="schedule-tab" data-bs-toggle="tab" data-bs-target="#schedule" type="button">📅 @Localizer["Schedule"]</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="materials-tab" data-bs-toggle="tab" data-bs-target="#materials" type="button">📂 @Localizer["Materials"]</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="progress-tab" data-bs-toggle="tab" data-bs-target="#progress" type="button">📊 @Localizer["Progress"]</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="payments-tab" data-bs-toggle="tab" data-bs-target="#payments" type="button">💳 @Localizer["Payments"]</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button">💬 @Localizer["Chat"]</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="courses-tab" data-bs-toggle="tab" data-bs-target="#courses" type="button">📚 @Localizer["Courses"]</button>
                </li>
            </ul>

            <!-- Контент вкладок -->
            <div class="tab-content mt-3">
                <div class="tab-pane fade show active" id="schedule" role="tabpanel">
                    <div id="scheduleContent">@Localizer["Loading"]</div>
                </div>
                <div class="tab-pane fade" id="materials" role="tabpanel">
                    <div id="materialsContent">@Localizer["Loading"]</div>
                </div>
                <div class="tab-pane fade" id="progress" role="tabpanel">
                    <div id="progressContent">@Localizer["Loading"]</div>
                </div>
                <div class="tab-pane fade" id="payments" role="tabpanel">
                    <div id="paymentsContent">@Localizer["Loading"]</div>
                </div>
                <div class="tab-pane fade" id="chat" role="tabpanel">
                    <div id="chatContent">@Localizer["Loading"]</div>
                </div>
                <div class="tab-pane fade" id="courses" role="tabpanel">
                    <div id="coursesContent">@Localizer["Loading"]</div>
                </div>
            </div>
        </main>
    </div>
</div>
@section Scripts {
        <script>
            function loadTabContent(tabId, url) {
                fetch(url)
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById(tabId).innerHTML = html;
                    });
            }

            // Завантажуємо Schedule при старті
            loadTabContent("scheduleContent", "/Student/ScheduleAll");

            // Підвантаження при кліку на вкладки
            document.getElementById("schedule-tab").addEventListener("click", () => {
                loadTabContent("scheduleContent", "/Student/ScheduleAll");
            });
            document.getElementById("materials-tab").addEventListener("click", () => {
                loadTabContent("materialsContent", "/Student/Materials");
            });
            document.getElementById("progress-tab").addEventListener("click", () => {
                loadTabContent("progressContent", "/Student/Progress");
            });
            document.getElementById("payments-tab").addEventListener("click", () => {
                loadTabContent("paymentsContent", "/Student/Payments");
            });
            document.getElementById("chat-tab").addEventListener("click", () => {
                loadTabContent("chatContent", "/Student/Chat");
            });
            document.getElementById("courses-tab").addEventListener("click", () => {
                loadTabContent("coursesContent", "/Student/Courses");
            });

        </script>
}